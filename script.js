const data = {
    classes: {
        "8 класс": ['Алгебра', 'Геометрия', 'Физика', 'Теория вероятности и статистика', 'ОБЗР', 'Литература', 'Русский язык', 'Информатика', 'Биология', 'Химия', 'Английский язык', 'География', 'История', 'Обществознание'],
        "Подготовка к ОГЭ": ['Русский язык']
    },

    topics: {
        "8 класс": {
            'Алгебра': ['Квадратные уравнения', 'ФСУ', 'Функции и их графики'],
            'Геометрия': ['Свойства площедей', 'Теорема Фаллеса'],
            'Физика': ['Двигатель внутреннего сгорания(ДВС)', 'Удельная теплота плавления'],
            'Английский язык': ['Past Tences', 'Present Tences', 'Определенные и неопределенные артикли'],
            'Химия': ['Использование кислорода', 'Воздух'],
            'География': ['Внутренние воды']
        },

        "Подготовка к ОГЭ": {
            'Русский язык': ['Изложение ОГЭ'],
        }
    },

    details: {
        'Двигатель внутреннего сгорания(ДВС)': {
            title: 'Двигатель внутреннего сгорания(ДВС)',
            content: 'ДВС - это тепловой двигатель сгорание топлива в котором происходит внутри двигателя',
            image: '1.png',
            subtopics: [
                { title: '1 Такт - выпуск', description: 'Поршень движется сверху вниз, открывается впускной клапан, заходит горючая смесь(смесь паров бензина и воздуха)(Эта смесь образуется в карбюраторе, в него поступает воздух и бензин пройдя через воздушный и бензо насосы соответственно)' },
                { title: '2 Такт - сжатие', description: 'Закрывается впускной клапан, поршень движется снизу вверх, сжимает горючую жидкость, в конце такта загорается свеча' },
                { title: '3 Такт - рабочий ход', description: 'Сгорающие газы под давлением толкают поршень вниз' },
                { title: '4 Такт - выпуск', description: 'Поршень движется вверх, открывается впускной калапан, из цилиндра выходят остатки от сгоревшего газа' }
            ]
        },

        'Изложение ОГЭ': {
            title: 'Изложение ОГЭ',
            content: 'Изложение ОГЭ - это форма работы с текстом которая предусматривает его пересказ (т.е. передачу содержания исходного текста в краткой форме) <br> Сжатое изложение всегда должно состоять из 3 абзацев и 70 - 85 слов <br> Основные способы сжатия текста:',
            subtopics: [
                { title: '1 Исключение', description: 'При исключении необходимо выделить главные детали, а затем исключить несущественные детали и объединить полученное в новый текст <br> К несущественным деталям относятся: вводные слова, однородные члены, повторы, риторические вопросы, восклицания и цитаты' },
                { title: '2 Обобщение', description: 'При обобщении необходимо выделить единичные факты, затем объединить и обобщить их, используя подходящие речевые обороты <br> Обобщению подлежат: ряды предложений связанных одной мыслью, несколько коротких предложений которые можно объединить в одно' },
                { title: '3 Замена', description: 'При замене словосочетания или предложения заменяются более простыми формулировками <br> Можно заменить: однородные члены обобщающими словами, сложные предложения простыми, прямую речь косвенной, придаточные определительные или обстоятельные сложные предложения определением или деепричастным оборотом' }
            ]
        },

        'Внутренние воды': {
            title: 'Внутренние воды',
            content: 'Внутренние воды - это часть водной территории государства, за исключением его территориального моря <br> К внутренним водам относят: реки, озера, болота, подземные воды, ледники, искуственные водоемы <br> Основные определения связанные с внутренними водами:',
            subtopics: [
                { title: 'Исток', description: 'Исток - это место откуда начниается река' },
                { title: 'Устье', description: 'Устье - место впадения реки в озеро или море' },
                { title: 'Речная система', description: 'Речная система - река со всеми ее притоками' },
                { title: 'Бассейн реки', description: 'Бассейн реки - место с которого река собирает свои воды' },
                { title: 'Водораздел', description: 'Вдораздел - граница между бассейнами рек' },
                { title: 'Годовой сток', description: 'Годовой сток - количество воды протекающее через реку в течении года' },
                { title: 'Половодье', description: 'Половодье — ежегодно повторяющийся в определённом сезоне года высокий продолжительный подъём воды в реке' }
            ],
        },

        'Использование кислорода': {
            title: 'Использование кислорода',
            content: 'Кислород используется в различных научных сферах, здесь перечисленны самые главные из них',
            subtopics: [
                { title: '1. Медицина', description: 'Кислород незаменим в медицине и используется в различных процедурах. Кислородная терапия помогает при респираторной недостаточности и гипоксии, а также применяется во время анестезии. ИВЛ (аппараты искусственной вентиляции легких) используют кислород для поддержания дыхания у пациентов в критическом состоянии. Барокамеры обеспечивают подачу кислорода под высоким давлением, что эффективно при лечении ожогов, хронических ран и декомпрессионной болезни.' },
                { title: '2. Авиация', description: 'В авиации кислород обеспечивает нормальную жизнедеятельность на больших высотах. В системах жизнеобеспечения он используется для подачи пилотам и экипажу из-за низкого содержания кислорода в разреженной атмосфере. Экстренные кислородные маски позволяют пассажирам и экипажу дышать при разгерметизации самолета.' },
                { title: '3. Сварка металлов', description: 'Газокислородная сварка невозможна без кислорода. Он усиливает горение ацетилена, создавая пламя с высокой температурой, необходимой для плавления металлов. Благодаря чистому горению швы получаются аккуратными и качественными, а рабочая зона эффективно очищается от загрязнений.' },
                { title: '4. Резка металлов', description: 'Кислородная резка металлов основана на использовании высоких температур и активного окисления. Металл нагревается до температуры воспламенения с помощью подогревающего пламени. Окисление удаляет расплавленные частицы, что позволяет выполнять точные и ровные разрезы.' },
                { title: '5. Взрывные работы', description: 'Кислород незаменим в процессах, связанных с взрывами и добычей. Его включают в состав взрывчатых веществ для увеличения энергии взрыва.' },
                { title: '6. Металлургия', description: 'В металлургии кислород используется для улучшения качества металлов. Конвертерное производство стали: кислород помогает удалять примеси, такие как углерод и сера. Обогащение воздуха в печах ускоряет плавку и увеличивает температуру процессов. Кислород участвует в рафинировании металлов, улучшая их химический состав.' }
            ]
        }
    }
};

// Состояние приложения
const appState = {
    currentView: 'classes', // Текущий экран
    currentData: null, // Данные текущего экрана
    previousViews: [] // История предыдущих экранов
};

// Отображение интерфейса
function renderView(view, currentData) {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = '';

    if (view === 'classes') {
        appState.previousViews = [];
        contentDiv.innerHTML = '<h2>Выберите класс:</h2>';
        Object.keys(data.classes).forEach(cls => {
            const panel = document.createElement('div');
            panel.className = 'panel';
            panel.textContent = `${cls}`;
            panel.onclick = () => navigateTo('subjects', cls);
            contentDiv.appendChild(panel);
        });
    } else if (view === 'subjects') {
        contentDiv.innerHTML = `<button onclick="goBack()">Назад</button><h2>Выберите предмет:</h2>`;
        data.classes[currentData].forEach(subject => {
            const panel = document.createElement('div');
            panel.className = 'panel';
            panel.textContent = subject;
            panel.onclick = () => navigateTo('topics', { class: currentData, subject: subject });
            contentDiv.appendChild(panel);
        });
    } else if (view === 'topics') {
        contentDiv.innerHTML = `<button onclick="goBack()">Назад</button><h2>Выберите тему:</h2>`;
        const { class: classId, subject } = currentData;
        (data.topics[classId] && data.topics[classId][subject] || []).forEach(topic => {
            const panel = document.createElement('div');
            panel.className = 'panel';
            panel.textContent = topic;
            panel.onclick = () => navigateTo('details', topic);
            contentDiv.appendChild(panel);
        });
    } else if (view === 'details') {
        const topicDetails = data.details[currentData];
        contentDiv.innerHTML = `<button onclick="goBack()">Назад</button>`;
        if (topicDetails) {
            contentDiv.innerHTML += `
                <h2>${topicDetails.title}</h2>
                <p>${topicDetails.content}</p>
                ${topicDetails.image ? `<img src="${topicDetails.image}" alt="${currentData}" class="topic-image">` : ''}
                ${topicDetails.subtopics.map(subtopic => `
                    <div class="panel">
                        <h4>${subtopic.title}</h4>
                        <p>${subtopic.description}</p>
                    </div>
                `).join('')}
            `;
        } else {
            contentDiv.innerHTML += `<p>Нет данных для этой темы.</p>`;
        }
    }
}

// Навигация между экранами
function navigateTo(view, currentData) {
    appState.previousViews.push({ view: appState.currentView, data: appState.currentData });
    appState.currentView = view;
    appState.currentData = currentData;
    renderView(view, currentData);
}

// Возврат к предыдущему экрану
function goBack() {
    if (appState.previousViews.length > 0) {
        const previousState = appState.previousViews.pop();
        appState.currentView = previousState.view;
        appState.currentData = previousState.data;
        renderView(previousState.view, previousState.data);
    }
}

// Первоначальный рендеринг
renderView('classes', null);
